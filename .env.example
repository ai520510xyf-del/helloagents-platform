# HelloAgents Platform - 环境变量配置示例
#
# 使用说明:
# 1. 复制此文件: cp .env.example .env
# 2. 编辑 .env 文件,填入真实的配置值
# 3. ⚠️  不要提交 .env 文件到Git仓库

# ==================== 核心配置 (必需) ====================

# 运行环境: development | staging | production
ENVIRONMENT=production

# AI API Keys - 至少配置一个
# 获取Claude API Key: https://console.anthropic.com/
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# OpenAI API (可选)
# 获取OpenAI API Key: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# DeepSeek API (可选,国内用户推荐)
# 获取DeepSeek API Key: https://platform.deepseek.com/
DEEPSEEK_API_KEY=

# ==================== 数据库配置 ====================

# PostgreSQL 配置 (生产环境推荐)
POSTGRES_USER=helloagents
POSTGRES_PASSWORD=your_secure_password_here  # ⚠️  必须修改,至少12位
POSTGRES_DB=helloagents
POSTGRES_HOST=postgres  # Docker内部主机名,通常不需要修改
POSTGRES_PORT=5432

# SQLite 配置 (开发环境)
# DATABASE_URL=sqlite:///./helloagents.db

# ==================== 应用配置 ====================

# 后端服务配置
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
LOG_LEVEL=INFO  # DEBUG | INFO | WARNING | ERROR

# 前端配置
# 如果后端部署在不同域名,需要修改此值
VITE_API_URL=http://localhost:8000

# CORS 配置 - 允许的前端域名
# 多个域名用逗号分隔,不要有空格
CORS_ORIGINS=http://localhost,http://localhost:5173,http://localhost:80,https://yourdomain.com

# ==================== Redis 配置 ====================

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# ==================== 安全配置 ====================

# JWT 密钥 (用于生成访问令牌)
# 生成方法: openssl rand -hex 32
SECRET_KEY=your_secret_key_here_change_this_in_production

# 会话超时时间 (秒)
SESSION_TIMEOUT=3600  # 1小时

# ==================== Docker 沙箱配置 ====================

# 代码执行超时时间 (秒)
DOCKER_TIMEOUT=30

# 容器池最大大小
MAX_CONTAINER_POOL_SIZE=10

# Docker镜像配置
SANDBOX_IMAGE=python:3.11-slim

# ==================== 监控配置 (可选) ====================

# Sentry 错误监控
# 获取DSN: https://sentry.io/
SENTRY_DSN=

# Sentry 环境标识
SENTRY_ENVIRONMENT=production

# 采样率 (0.0 - 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# ==================== 功能开关 ====================

# 调试模式 (⚠️  生产环境必须设为false)
DEBUG=false

# 启用API文档 (生产环境可设为false)
ENABLE_API_DOCS=true

# 启用测试端点 (⚠️  生产环境必须设为false)
ENABLE_TEST_ENDPOINTS=false

# ==================== 日志配置 ====================

# 日志格式: json | text
LOG_FORMAT=json

# 日志文件路径
LOG_FILE=/app/logs/app.log

# 日志轮转大小 (MB)
LOG_MAX_SIZE=100

# 保留日志文件数量
LOG_BACKUP_COUNT=10

# ==================== 性能配置 ====================

# Worker进程数 (建议: CPU核心数 * 2)
WORKERS=4

# 请求超时时间 (秒)
REQUEST_TIMEOUT=60

# 最大请求大小 (MB)
MAX_REQUEST_SIZE=10

# ==================== 缓存配置 ====================

# Redis 缓存过期时间 (秒)
CACHE_TTL=3600  # 1小时

# 启用查询缓存
ENABLE_QUERY_CACHE=true

# ==================== 限流配置 ====================

# API 限流 - 每分钟请求数
RATE_LIMIT_PER_MINUTE=60

# AI API 限流 - 每小时请求数
AI_API_RATE_LIMIT_PER_HOUR=100

# ==================== 备份配置 ====================

# 自动备份间隔 (小时)
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份存储路径
BACKUP_PATH=/opt/backups

# ==================== 其他配置 ====================

# 时区设置
TZ=Asia/Shanghai

# 语言设置
LANG=zh_CN.UTF-8

# ==================== 开发配置 (仅开发环境) ====================

# 热重载 (开发环境)
# HOT_RELOAD=true

# 跳过API密钥验证 (⚠️  仅用于本地开发)
# SKIP_API_KEY_VALIDATION=false

# Mock AI响应 (用于测试)
# MOCK_AI_RESPONSES=false
