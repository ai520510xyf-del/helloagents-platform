# æµ‹è¯•æ¡†æ¶æ­å»ºæ€»ç»“

**å®Œæˆæ—¥æœŸ**: 2026-01-08
**è´Ÿè´£äºº**: Backend Lead + Frontend Lead
**çŠ¶æ€**: âœ… å®Œæˆ

---

## æ¦‚è§ˆ

æˆåŠŸä¸º HelloAgents å­¦ä¹ å¹³å°æ­å»ºäº†å®Œæ•´çš„å‰åç«¯æµ‹è¯•æ¡†æ¶ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œè¦†ç›–ç‡æŠ¥å‘Šã€‚

### å…³é”®æˆå°± ğŸ¯

1. âœ… **åç«¯æµ‹è¯•æ¡†æ¶ (pytest)**ï¼šå®Œæ•´é…ç½® + 39 ä¸ªæµ‹è¯•ç”¨ä¾‹
2. âœ… **å‰ç«¯æµ‹è¯•æ¡†æ¶ (Vitest)**ï¼šå®Œæ•´é…ç½® + ç¤ºä¾‹æµ‹è¯•
3. âœ… **æµ‹è¯•æ–‡æ¡£**ï¼šè¯¦ç»†çš„æµ‹è¯•æŒ‡å—å’Œæœ€ä½³å®è·µ
4. âœ… **CI/CD å°±ç»ª**ï¼šæµ‹è¯•å¯é›†æˆåˆ°æŒç»­é›†æˆæµç¨‹

---

## åç«¯æµ‹è¯•æ¡†æ¶ (Python + pytest)

### æŠ€æœ¯æ ˆ
- **æµ‹è¯•è¿è¡Œå™¨**: pytest 8.3.4
- **HTTP å®¢æˆ·ç«¯**: FastAPI TestClient (httpx 0.28.1)
- **è¦†ç›–ç‡å·¥å…·**: pytest-cov 6.0.0
- **æ•°æ®åº“**: SQLite (å†…å­˜æ•°æ®åº“)

### æ–‡ä»¶ç»“æ„
```
backend/
â”œâ”€â”€ pytest.ini                    # pytest é…ç½®
â”œâ”€â”€ requirements.txt              # åŒ…å«æµ‹è¯•ä¾èµ–
â””â”€â”€ tests/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ conftest.py               # Fixtures å’Œé…ç½®
    â”œâ”€â”€ test_api_basic.py         # åŸºç¡€ API æµ‹è¯• (7 tests)
    â”œâ”€â”€ test_api_users.py         # ç”¨æˆ· API æµ‹è¯• (7 tests)
    â”œâ”€â”€ test_api_progress.py      # è¿›åº¦ API æµ‹è¯• (8 tests)
    â”œâ”€â”€ test_api_migration.py     # è¿ç§» API æµ‹è¯• (7 tests)
    â”œâ”€â”€ test_models.py            # æ¨¡å‹æµ‹è¯• (10 tests)
    â””â”€â”€ README.md                 # æµ‹è¯•æ–‡æ¡£
```

### æµ‹è¯•ç»Ÿè®¡
| ç±»åˆ« | æµ‹è¯•æ•°é‡ | é€šè¿‡ | å¤±è´¥ |
|------|---------|------|------|
| åŸºç¡€ API | 7 | 7 | 0 |
| ç”¨æˆ· API | 7 | 1 | 6 |
| è¿›åº¦ API | 8 | 5 | 3 |
| è¿ç§» API | 7 | 1 | 6 |
| æ•°æ®æ¨¡å‹ | 10 | 10 | 0 |
| **æ€»è®¡** | **39** | **24** | **15** |

**å½“å‰é€šè¿‡ç‡**: 61.5% (24/39)

> æ³¨ï¼šå¤±è´¥çš„æµ‹è¯•æ­£åœ¨ç”± Debugger å›¢é˜Ÿæˆå‘˜ä¿®å¤ä¸­

### å…³é”® Fixtures

```python
@pytest.fixture
def db_session():
    """æµ‹è¯•æ•°æ®åº“ä¼šè¯ï¼ˆå†…å­˜ SQLiteï¼‰"""

@pytest.fixture
def client(db_session):
    """FastAPI æµ‹è¯•å®¢æˆ·ç«¯"""

@pytest.fixture
def sample_user(db_session):
    """æµ‹è¯•ç”¨æˆ·æ•°æ®"""

@pytest.fixture
def sample_lesson(db_session):
    """æµ‹è¯•è¯¾ç¨‹æ•°æ®"""

@pytest.fixture
def sample_progress(db_session, sample_user, sample_lesson):
    """æµ‹è¯•å­¦ä¹ è¿›åº¦æ•°æ®"""
```

### è¿è¡Œå‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¯¦ç»†è¾“å‡º
pytest -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html

# åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
pytest --lf

# è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest tests/test_models.py
```

---

## å‰ç«¯æµ‹è¯•æ¡†æ¶ (TypeScript + Vitest)

### æŠ€æœ¯æ ˆ
- **æµ‹è¯•è¿è¡Œå™¨**: Vitest 2.2.3
- **æµ‹è¯•åº“**: @testing-library/react 16.1.0
- **DOM æ–­è¨€**: @testing-library/jest-dom 6.6.3
- **ç”¨æˆ·äº¤äº’**: @testing-library/user-event 14.5.2
- **æµ‹è¯•ç¯å¢ƒ**: jsdom 26.0.1
- **è¦†ç›–ç‡**: @vitest/coverage-v8 2.2.3

### æ–‡ä»¶ç»“æ„
```
frontend/
â”œâ”€â”€ vitest.config.ts              # Vitest é…ç½®
â”œâ”€â”€ package.json                  # åŒ…å«æµ‹è¯•è„šæœ¬å’Œä¾èµ–
â””â”€â”€ src/
    â”œâ”€â”€ test/
    â”‚   â”œâ”€â”€ setup.ts              # æµ‹è¯•ç¯å¢ƒè®¾ç½®
    â”‚   â”œâ”€â”€ utils.ts              # æµ‹è¯•å·¥å…·å‡½æ•°
    â”‚   â””â”€â”€ README.md             # æµ‹è¯•æ–‡æ¡£
    â”œâ”€â”€ utils/
    â”‚   â””â”€â”€ migrationHelper.spec.ts    # è¿ç§»å·¥å…·æµ‹è¯•
    â””â”€â”€ components/
        â””â”€â”€ ui/
            â””â”€â”€ Button.spec.tsx   # Button ç»„ä»¶æµ‹è¯•
```

### æµ‹è¯•é…ç½®

```typescript
// vitest.config.ts
export default defineConfig({
  plugins: [react()],
  test: {
    environment: 'jsdom',
    globals: true,
    setupFiles: ['./src/test/setup.ts'],
    coverage: {
      provider: 'v8',
      reporter: ['text', 'json', 'html']
    }
  }
})
```

### npm è„šæœ¬
```json
{
  "scripts": {
    "test": "vitest --run",
    "test:watch": "vitest",
    "test:ui": "vitest --ui",
    "test:coverage": "vitest --coverage"
  }
}
```

### æµ‹è¯•ç¤ºä¾‹

#### ç»„ä»¶æµ‹è¯•
```typescript
describe('Button', () => {
  it('åº”è¯¥æ¸²æŸ“æŒ‰é’®æ–‡æœ¬', () => {
    render(<Button>Click me</Button>)
    expect(screen.getByText('Click me')).toBeInTheDocument()
  })

  it('åº”è¯¥åœ¨ç‚¹å‡»æ—¶è°ƒç”¨å¤„ç†å‡½æ•°', () => {
    const handleClick = vi.fn()
    render(<Button onClick={handleClick}>Click</Button>)

    fireEvent.click(screen.getByText('Click'))
    expect(handleClick).toHaveBeenCalledTimes(1)
  })
})
```

#### å·¥å…·å‡½æ•°æµ‹è¯•
```typescript
describe('needsMigration', () => {
  it('åº”è¯¥æ£€æµ‹ localStorage æ•°æ®', () => {
    localStorage.setItem('helloagents_progress', '{}')
    expect(needsMigration()).toBe(true)
  })
})
```

### è¿è¡Œå‘½ä»¤
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# ç›‘è§†æ¨¡å¼
npm run test:watch

# UI æ¨¡å¼
npm run test:ui

# ç”Ÿæˆè¦†ç›–ç‡
npm run test:coverage
```

---

## æµ‹è¯•è¦†ç›–ç›®æ ‡

### å½“å‰çŠ¶æ€
- **åç«¯**: åŸºç¡€æ¡†æ¶å®Œæˆï¼Œæ¨¡å‹å±‚ 100% è¦†ç›–
- **å‰ç«¯**: åŸºç¡€æ¡†æ¶å®Œæˆï¼Œç¤ºä¾‹æµ‹è¯•å°±ç»ª

### ç›®æ ‡è¦†ç›–ç‡
| å±‚çº§ | ç›®æ ‡ | å½“å‰ |
|------|------|------|
| è¯­å¥è¦†ç›–ç‡ | â‰¥80% | TBD |
| åˆ†æ”¯è¦†ç›–ç‡ | â‰¥75% | TBD |
| å‡½æ•°è¦†ç›–ç‡ | â‰¥80% | TBD |
| è¡Œè¦†ç›–ç‡ | â‰¥80% | TBD |

---

## æŒç»­é›†æˆé…ç½®

### GitHub Actions é…ç½®ç¤ºä¾‹

```yaml
# .github/workflows/test.yml
name: Tests
on: [push, pull_request]

jobs:
  backend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v2
        with:
          python-version: '3.11'
      - run: |
          cd backend
          pip install -r requirements.txt
          pytest --cov=app --cov-report=xml
      - uses: codecov/codecov-action@v3

  frontend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '20'
      - run: |
          cd frontend
          npm ci
          npm test -- --run
          npm run test:coverage
      - uses: codecov/codecov-action@v3
```

---

## æµ‹è¯•æœ€ä½³å®è·µ

### åç«¯æµ‹è¯•

1. **ä½¿ç”¨å†…å­˜æ•°æ®åº“**
   - æ¯ä¸ªæµ‹è¯•ç‹¬ç«‹çš„æ•°æ®åº“ä¼šè¯
   - æµ‹è¯•åè‡ªåŠ¨æ¸…ç†

2. **Fixture å¤ç”¨**
   - åˆ›å»ºå¯å¤ç”¨çš„æµ‹è¯•æ•°æ®
   - ä½¿ç”¨ pytest fixtures ç®¡ç†ä¾èµ–

3. **æµ‹è¯•éš”ç¦»**
   - æ¯ä¸ªæµ‹è¯•å‡½æ•°ç‹¬ç«‹è¿è¡Œ
   - ä¸ä¾èµ–å…¶ä»–æµ‹è¯•çš„ç»“æœ

4. **æ¸…æ™°çš„æ–­è¨€**
   ```python
   assert response.status_code == 200
   assert data["username"] == "test_user"
   ```

### å‰ç«¯æµ‹è¯•

1. **æµ‹è¯•ç”¨æˆ·è¡Œä¸ºè€Œéå®ç°**
   ```typescript
   // âœ… å¥½
   expect(screen.getByText('Count: 1')).toBeInTheDocument()

   // âŒ é¿å…
   expect(component.state.count).toBe(1)
   ```

2. **ä½¿ç”¨ Testing Library**
   - é€šè¿‡ç”¨æˆ·å¯è§çš„å…ƒç´ æŸ¥è¯¢
   - æ¨¡æ‹ŸçœŸå®ç”¨æˆ·äº¤äº’

3. **AAA æ¨¡å¼**
   ```typescript
   // Arrange: å‡†å¤‡
   const user = userEvent.setup()
   render(<Component />)

   // Act: æ“ä½œ
   await user.click(screen.getByRole('button'))

   // Assert: éªŒè¯
   expect(screen.getByText('Success')).toBeInTheDocument()
   ```

4. **Mock å¤–éƒ¨ä¾èµ–**
   ```typescript
   vi.mock('../services/api', () => ({
     executeCode: vi.fn(() => Promise.resolve({ success: true }))
   }))
   ```

---

## ä¸‹ä¸€æ­¥å·¥ä½œ

### ç«‹å³ä»»åŠ¡ ğŸš€
1. â³ **ä¿®å¤å¤±è´¥çš„åç«¯æµ‹è¯•** (Debugger æ­£åœ¨å¤„ç†)
2. â³ **è¡¥å……å‰ç«¯æµ‹è¯•ç”¨ä¾‹** (Test Automator æ­£åœ¨å¤„ç†)
3. â³ **å‰ç«¯ç»„ä»¶é‡æ„** (Frontend Developer æ­£åœ¨å¤„ç†)

### çŸ­æœŸä»»åŠ¡ ğŸ“‹
1. æå‡æµ‹è¯•è¦†ç›–ç‡åˆ° 80%
2. æ·»åŠ é›†æˆæµ‹è¯•ï¼ˆç«¯åˆ°ç«¯ï¼‰
3. è®¾ç½® CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•
4. æ·»åŠ æ€§èƒ½æµ‹è¯•

### é•¿æœŸç›®æ ‡ ğŸ¯
1. å®ç° TDD (æµ‹è¯•é©±åŠ¨å¼€å‘) å·¥ä½œæµ
2. æ·»åŠ  E2E æµ‹è¯• (Playwright/Cypress)
3. å®ç°è§†è§‰å›å½’æµ‹è¯•
4. æ€§èƒ½åŸºå‡†æµ‹è¯•

---

## æŠ€æœ¯å€ºåŠ¡

### å·²çŸ¥é—®é¢˜
1. **åç«¯æµ‹è¯•å¤±è´¥** (15/39)
   - è¿ç§» API è¿”å› 500 é”™è¯¯
   - éƒ¨åˆ†ç”¨æˆ· API æµ‹è¯•å¤±è´¥
   - éƒ¨åˆ†è¿›åº¦ API æµ‹è¯•å¤±è´¥

2. **å‰ç«¯æµ‹è¯•è¦†ç›–ä¸è¶³**
   - ä»…æœ‰ç¤ºä¾‹æµ‹è¯•
   - éœ€è¦ä¸ºæ‰€æœ‰ç»„ä»¶æ·»åŠ æµ‹è¯•
   - éœ€è¦ API æœåŠ¡æµ‹è¯•

3. **Mock Service Worker**
   - æœªé…ç½® MSW
   - éœ€è¦æ¨¡æ‹Ÿ API å“åº”

### è§£å†³æ–¹æ¡ˆ
- Debugger å›¢é˜Ÿæˆå‘˜æ­£åœ¨ä¿®å¤åç«¯æµ‹è¯•
- Test Automator æ­£åœ¨è¡¥å……å‰ç«¯æµ‹è¯•
- å°†åœ¨ä¸‹ä¸ªè¿­ä»£ä¸­é…ç½® MSW

---

## å›¢é˜Ÿåä½œ

### å¹¶è¡Œå¼€å‘æ¨¡å¼
æœ¬æ¬¡æµ‹è¯•æ¡†æ¶æ­å»ºé‡‡ç”¨äº†å›¢é˜Ÿå¹¶è¡Œå¼€å‘æ¨¡å¼ï¼š

```
ä¸»å¼€å‘è€…
  â”œâ”€â”€ å®Œæˆæµ‹è¯•æ¡†æ¶åŸºç¡€é…ç½®
  â””â”€â”€ å¯åŠ¨ 3 ä¸ªå¹¶è¡Œä»»åŠ¡ï¼š
      â”œâ”€â”€ Frontend Developer â†’ é‡æ„ LearnPage
      â”œâ”€â”€ Debugger â†’ ä¿®å¤æµ‹è¯•å¤±è´¥
      â””â”€â”€ Test Automator â†’ è¡¥å……æµ‹è¯•ç”¨ä¾‹
```

### ä¼˜åŠ¿
âœ… ç¼©çŸ­å¼€å‘å‘¨æœŸ
âœ… ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ
âœ… ä¸“äººä¸“é¡¹è´Ÿè´£
âœ… æé«˜æ•´ä½“æ•ˆç‡

---

## èµ„æºå’Œæ–‡æ¡£

### æ–‡æ¡£ä½ç½®
- **åç«¯æµ‹è¯•æŒ‡å—**: `backend/tests/README.md`
- **å‰ç«¯æµ‹è¯•æŒ‡å—**: `frontend/src/test/README.md`
- **è¿ç§»æŒ‡å—**: `MIGRATION_GUIDE.md`

### å¤–éƒ¨èµ„æº
- [pytest æ–‡æ¡£](https://docs.pytest.org/)
- [Vitest æ–‡æ¡£](https://vitest.dev/)
- [Testing Library](https://testing-library.com/)
- [FastAPI æµ‹è¯•](https://fastapi.tiangolo.com/tutorial/testing/)

---

## æ€»ç»“

âœ… **å®Œæˆåº¦**: 100% (æ¡†æ¶æ­å»º)
â³ **æµ‹è¯•ä¿®å¤**: è¿›è¡Œä¸­ (Debugger)
â³ **æµ‹è¯•è¡¥å……**: è¿›è¡Œä¸­ (Test Automator)
â³ **ä»£ç é‡æ„**: è¿›è¡Œä¸­ (Frontend Developer)

**çŠ¶æ€**: æµ‹è¯•æ¡†æ¶å·²å°±ç»ªï¼Œå›¢é˜Ÿæ­£åœ¨å¹¶è¡Œå®Œå–„æµ‹è¯•è¦†ç›–ç‡å’Œä¿®å¤å·²çŸ¥é—®é¢˜ã€‚

---

**æŠ¥å‘Šç”Ÿæˆ**: 2026-01-08 10:25
**ä¸‹æ¬¡è¯„å®¡**: æ‰€æœ‰å¹¶è¡Œä»»åŠ¡å®Œæˆå
**è´£ä»»äºº**: Backend Lead + Frontend Lead
**çŠ¶æ€**: âœ… æµ‹è¯•æ¡†æ¶æ­å»ºå®Œæˆ
