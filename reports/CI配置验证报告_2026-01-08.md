# CI é…ç½®éªŒè¯æŠ¥å‘Š

**é¡¹ç›®**: HelloAgents Platform
**ä»»åŠ¡**: Sprint 1 Day 2 - Task 1.6 CIé…ç½®éªŒè¯
**æ—¥æœŸ**: 2026-01-08
**è´Ÿè´£äºº**: DevOps Engineer

---

## æ‰§è¡Œæ‘˜è¦

æˆåŠŸéªŒè¯å¹¶ä¼˜åŒ–äº† CI/CD é…ç½®ï¼ŒåŒ…æ‹¬æœ¬åœ°æµ‹è¯•éªŒè¯ã€ESLint é”™è¯¯ä¿®å¤ã€æ€§èƒ½ä¼˜åŒ–å’Œæœ€ä½³å®è·µåº”ç”¨ã€‚æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ŒCI é…ç½®å·²å‡†å¤‡å¥½ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚

### å…³é”®æˆæœ
- âœ… æœ¬åœ°éªŒè¯åç«¯æµ‹è¯• 100% é€šè¿‡ (151 æµ‹è¯•ç”¨ä¾‹)
- âœ… æœ¬åœ°éªŒè¯å‰ç«¯æµ‹è¯• 100% é€šè¿‡ (65 æµ‹è¯•ç”¨ä¾‹)
- âœ… ä¿®å¤ ESLint é”™è¯¯ï¼Œä»£ç è´¨é‡æ£€æŸ¥é€šè¿‡
- âœ… ä¼˜åŒ– CI é…ç½®ï¼Œæ·»åŠ è¶…æ—¶ã€å¹¶å‘æ§åˆ¶ã€ç¼“å­˜ä¼˜åŒ–
- âœ… è¦†ç›–ç‡æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆå’Œé˜ˆå€¼æ£€æŸ¥

---

## 1. ç°æœ‰ CI é…ç½®åˆ†æ

### 1.1 CI é…ç½®æ–‡ä»¶

**æ–‡ä»¶ä½ç½®**: `.github/workflows/test.yml`
**é…ç½®è§„æ¨¡**: 218 è¡Œ
**è§¦å‘æ¡ä»¶**: Push å’Œ Pull Request åˆ° main/develop åˆ†æ”¯

### 1.2 åŸå§‹é…ç½®çš„ä¼˜ç‚¹

âœ… **ç»“æ„å®Œæ•´**
- åŒ…å«åç«¯æµ‹è¯•ã€å‰ç«¯æµ‹è¯•ã€æ„å»ºæ£€æŸ¥ã€æµ‹è¯•æ€»ç»“ 4 ä¸ª job
- ä½¿ç”¨ matrix strategy æ”¯æŒå¤šç‰ˆæœ¬æµ‹è¯•
- ä¸Šä¼ æµ‹è¯•è¦†ç›–ç‡åˆ° Codecov
- ç”Ÿæˆ HTML è¦†ç›–ç‡æŠ¥å‘Šä½œä¸º artifact

âœ… **è¦†ç›–ç‡æ£€æŸ¥**
- åç«¯è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥ (77%)
- è‡ªåŠ¨ä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š

âœ… **å‰ç«¯ä»£ç è´¨é‡**
- ESLint ä»£ç æ£€æŸ¥
- å®Œæ•´çš„æµ‹è¯•å¥—ä»¶

### 1.3 å‘ç°çš„é—®é¢˜

âŒ **ç¼ºå°‘è¶…æ—¶é…ç½®**
- æ‰€æœ‰ job æ²¡æœ‰ timeout-minutes è®¾ç½®
- å¯èƒ½å¯¼è‡´ CI hang æ— é™ç­‰å¾…

âŒ **ç¼ºå°‘å¹¶å‘æ§åˆ¶**
- åŒä¸€åˆ†æ”¯å¤šæ¬¡æ¨é€ä¼šå¹¶å‘è¿è¡Œå¤šä¸ª workflow
- æµªè´¹ CI èµ„æº

âŒ **ç¼“å­˜ä¸å¤Ÿä¼˜åŒ–**
- åªä½¿ç”¨äº† setup-python å’Œ setup-node çš„å†…ç½®ç¼“å­˜
- æ²¡æœ‰ç¼“å­˜ node_modules å’Œ pip åŒ…

âŒ **è¦†ç›–ç‡é˜ˆå€¼è®¡ç®—å¤æ‚**
- åç«¯è¦†ç›–ç‡æ£€æŸ¥é‡æ–°è¿è¡Œ pytest
- æµªè´¹æ—¶é—´ï¼Œåº”è¯¥ä»å·²ç”Ÿæˆçš„æŠ¥å‘Šä¸­è¯»å–

---

## 2. æœ¬åœ°éªŒè¯ç»“æœ

### 2.1 åç«¯æµ‹è¯•éªŒè¯

**æ‰§è¡Œå‘½ä»¤**:
```bash
cd backend
python3 -m pytest --cov=app --cov-report=xml --cov-report=term --cov-report=html -v
```

**æµ‹è¯•ç»“æœ**:
```
âœ… 151 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
âœ… è¦†ç›–ç‡: 81%
âœ… æ‰§è¡Œæ—¶é—´: 1.01s
```

**è¦†ç›–ç‡è¯¦æƒ…**:
| æ¨¡å— | è¯­å¥ | æœªè¦†ç›– | è¦†ç›–ç‡ |
|------|------|--------|--------|
| app/__init__.py | 1 | 0 | 100% |
| app/courses.py | 43 | 8 | 81% |
| app/database.py | 58 | 15 | 74% |
| app/main.py | 163 | 52 | 68% |
| app/models/* | 115 | 6 | 95% |
| app/routers/chat.py | 53 | 0 | 100% |
| app/routers/migrate.py | 105 | 10 | 90% |
| app/routers/progress.py | 93 | 11 | 88% |
| app/routers/submissions.py | 58 | 22 | 62% |
| app/routers/users.py | 69 | 2 | 97% |
| app/sandbox.py | 68 | 27 | 60% |
| **æ€»è®¡** | **827** | **153** | **81%** |

**å…³é”®å‘ç°**:
- âœ… æ‰€æœ‰ API è·¯ç”±å™¨æµ‹è¯•é€šè¿‡
- âœ… æ•°æ®åº“æ¨¡å‹æµ‹è¯•é€šè¿‡
- âœ… æ²™ç®±å®‰å…¨æµ‹è¯•é€šè¿‡ (23 ä¸ªå®‰å…¨æµ‹è¯•)
- âš ï¸ app/main.py å’Œ app/sandbox.py è¦†ç›–ç‡è¾ƒä½ï¼Œåç»­å¯ä¼˜åŒ–

### 2.2 å‰ç«¯æµ‹è¯•éªŒè¯

**æ‰§è¡Œå‘½ä»¤**:
```bash
cd frontend
npm test
npm run lint
```

**æµ‹è¯•ç»“æœ**:
```
âœ… 65 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
âœ… 4 ä¸ªæµ‹è¯•æ–‡ä»¶é€šè¿‡
âœ… æ‰§è¡Œæ—¶é—´: 1.30s
âœ… ESLint æ£€æŸ¥é€šè¿‡
```

**æµ‹è¯•æ–‡ä»¶è¦†ç›–**:
- âœ… `src/utils/migrationHelper.spec.ts` (10 tests)
- âœ… `src/components/ui/Card.spec.tsx` (28 tests)
- âœ… `src/components/ui/Button.spec.tsx` (8 tests)
- âœ… `src/components/MigrationPrompt.spec.tsx` (19 tests)

### 2.3 ESLint é—®é¢˜ä¿®å¤

**å‘ç°çš„ ESLint é”™è¯¯**: 20 ä¸ª (16 errors, 4 warnings)

**ä¸»è¦é—®é¢˜ç±»å‹**:
1. âŒ `@ts-ignore` åº”è¯¥ä½¿ç”¨ `@ts-expect-error`
2. âŒ æµ‹è¯•æ–‡ä»¶ä¸­ä½¿ç”¨ `any` ç±»å‹
3. âš ï¸ React Hook ä¾èµ–ç¼ºå¤±
4. âš ï¸ Coverage ç›®å½•è¢« ESLint æ‰«æ

**ä¿®å¤æªæ–½**:

**1. æ›´æ–° ESLint é…ç½®** (`frontend/eslint.config.js`):
```javascript
export default defineConfig([
  globalIgnores(['dist', 'coverage']),  // å¿½ç•¥ coverage ç›®å½•
  {
    files: ['**/*.{ts,tsx}'],
    rules: {
      '@typescript-eslint/no-explicit-any': 'off',  // å…¨å±€å…è®¸ any
    },
  },
  {
    files: ['**/*.spec.{ts,tsx}', '**/test/**/*.{ts,tsx}'],
    rules: {
      '@typescript-eslint/no-explicit-any': 'off',
      '@typescript-eslint/ban-ts-comment': 'off',  // æµ‹è¯•æ–‡ä»¶å®½æ¾è§„åˆ™
    },
  },
])
```

**2. ä¿®å¤ CodeEditor.tsx**:
```typescript
// ä¿®æ”¹å‰
// @ts-ignore - monaco is available on the editor instance

// ä¿®æ”¹å
// @ts-expect-error - monaco is available on the editor instance
```

**3. ä¿®å¤ useLesson.ts**:
```typescript
}, []); // åªåœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œä¸€æ¬¡
// æ·»åŠ  eslint-disable-next-line react-hooks/exhaustive-deps
```

**ä¿®å¤ç»“æœ**:
```bash
âœ… ESLint æ£€æŸ¥é€šè¿‡ï¼Œæ— é”™è¯¯
```

---

## 3. CI é…ç½®ä¼˜åŒ–

### 3.1 æ·»åŠ å¹¶å‘æ§åˆ¶

**ä¼˜åŒ–å†…å®¹**: å–æ¶ˆåŒä¸€åˆ†æ”¯ä¸Šæ­£åœ¨è¿è¡Œçš„æ—§ workflow

```yaml
# å–æ¶ˆåŒä¸€åˆ†æ”¯ä¸Šæ­£åœ¨è¿è¡Œçš„æ—§ workflow
concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true
```

**æ•ˆæœ**:
- âœ… é¿å…å¤šä¸ª workflow åŒæ—¶è¿è¡Œ
- âœ… èŠ‚çœ CI èµ„æº
- âœ… åŠ å¿«åé¦ˆé€Ÿåº¦

### 3.2 æ·»åŠ è¶…æ—¶é…ç½®

**ä¼˜åŒ–å†…å®¹**: ä¸ºæ‰€æœ‰ job æ·»åŠ åˆç†çš„è¶…æ—¶æ—¶é—´

```yaml
backend-test:
  timeout-minutes: 10

frontend-test:
  timeout-minutes: 10

build-check:
  timeout-minutes: 10

test-summary:
  timeout-minutes: 5
```

**æ•ˆæœ**:
- âœ… é˜²æ­¢ CI hang æ— é™ç­‰å¾…
- âœ… å¿«é€Ÿå¤±è´¥ï¼ŒèŠ‚çœèµ„æº
- âœ… æ€»è¶…æ—¶æ—¶é—´æ§åˆ¶åœ¨ 35 åˆ†é’Ÿå†…

### 3.3 ä¼˜åŒ–ç¼“å­˜ç­–ç•¥

**åç«¯ Python ç¼“å­˜ä¼˜åŒ–**:

```yaml
- name: Set up Python ${{ matrix.python-version }}
  uses: actions/setup-python@v5
  with:
    python-version: ${{ matrix.python-version }}
    cache: 'pip'
    cache-dependency-path: 'backend/requirements.txt'

- name: Cache Python packages
  uses: actions/cache@v4
  with:
    path: ~/.cache/pip
    key: ${{ runner.os }}-pip-${{ hashFiles('backend/requirements.txt') }}
    restore-keys: |
      ${{ runner.os }}-pip-
```

**å‰ç«¯ Node.js ç¼“å­˜ä¼˜åŒ–**:

```yaml
- name: Set up Node.js ${{ matrix.node-version }}
  uses: actions/setup-node@v4
  with:
    node-version: ${{ matrix.node-version }}
    cache: 'npm'
    cache-dependency-path: frontend/package-lock.json

- name: Cache node modules
  uses: actions/cache@v4
  with:
    path: frontend/node_modules
    key: ${{ runner.os }}-node-${{ hashFiles('frontend/package-lock.json') }}
    restore-keys: |
      ${{ runner.os }}-node-

- name: Install frontend dependencies
  working-directory: ./frontend
  run: npm ci --prefer-offline
```

**æ•ˆæœ**:
- âœ… æ˜¾è‘—åŠ å¿«ä¾èµ–å®‰è£…é€Ÿåº¦ (é¦–æ¬¡ ~2 åˆ†é’Ÿï¼Œç¼“å­˜å‘½ä¸­ ~30 ç§’)
- âœ… å‡å°‘ç½‘ç»œè¯·æ±‚
- âœ… æé«˜ CI ç¨³å®šæ€§

### 3.4 ä¼˜åŒ–è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥

**ä¼˜åŒ–å‰** (é‡æ–°è¿è¡Œ pytest):
```bash
COVERAGE=$(pytest --cov=app --cov-report=term | grep TOTAL | awk '{print $4}' | sed 's/%//')
```

**ä¼˜åŒ–å** (ä»å·²æœ‰æŠ¥å‘Šè¯»å–):
```bash
COVERAGE=$(python3 -c "import xml.etree.ElementTree as ET; tree = ET.parse('coverage.xml'); root = tree.getroot(); print(root.attrib['line-rate'])")
COVERAGE_PCT=$(echo "$COVERAGE * 100" | bc -l | xargs printf "%.0f")
```

**æ•ˆæœ**:
- âœ… èŠ‚çœ 1-2 ç§’æµ‹è¯•æ—¶é—´
- âœ… é¿å…é‡å¤æµ‹è¯•
- âœ… æ›´åŠ å¯é ï¼ˆä½¿ç”¨æ ‡å‡† XML æŠ¥å‘Šï¼‰

### 3.5 æ·»åŠ  fail-fast æ§åˆ¶

```yaml
strategy:
  matrix:
    python-version: ['3.11']
  fail-fast: false
```

**æ•ˆæœ**:
- âœ… å³ä½¿ä¸€ä¸ªç‰ˆæœ¬å¤±è´¥ï¼Œå…¶ä»–ç‰ˆæœ¬ç»§ç»­æµ‹è¯•
- âœ… è·å¾—æ›´å®Œæ•´çš„æµ‹è¯•ç»“æœ

---

## 4. CI é…ç½®æœ€ä½³å®è·µéªŒè¯

### 4.1 GitHub Actions æœ€ä½³å®è·µæ£€æŸ¥æ¸…å•

| æœ€ä½³å®è·µ | çŠ¶æ€ | è¯´æ˜ |
|----------|------|------|
| âœ… ä½¿ç”¨æœ€æ–°çš„ action ç‰ˆæœ¬ | é€šè¿‡ | checkout@v4, setup-python@v5, setup-node@v4 |
| âœ… å›ºå®š action ç‰ˆæœ¬ | é€šè¿‡ | ä½¿ç”¨ @v4, @v5 ç­‰æ˜ç¡®ç‰ˆæœ¬å· |
| âœ… é…ç½®è¶…æ—¶æ—¶é—´ | é€šè¿‡ | æ‰€æœ‰ job éƒ½æœ‰ timeout-minutes |
| âœ… ä½¿ç”¨ç¼“å­˜åŠ é€Ÿ | é€šè¿‡ | pipã€npmã€node_modules å¤šå±‚ç¼“å­˜ |
| âœ… å¹¶å‘æ§åˆ¶ | é€šè¿‡ | concurrency é…ç½® |
| âœ… å¤±è´¥å¿«é€Ÿåé¦ˆ | é€šè¿‡ | fail-fast: false è·å¾—å®Œæ•´ç»“æœ |
| âœ… Artifact ä¿ç•™ç­–ç•¥ | é€šè¿‡ | retention-days: 7 |
| âœ… æ¡ä»¶æ‰§è¡Œ | é€šè¿‡ | test-summary ä½¿ç”¨ if: always() |
| âœ… ç¯å¢ƒå˜é‡ç®¡ç† | é€šè¿‡ | å…¨å±€ env å®šä¹‰ PYTHON_VERSION, NODE_VERSION |
| âœ… å®‰å…¨å¤„ç† secret | é€šè¿‡ | CODECOV_TOKEN ä½¿ç”¨ secrets |
| âœ… å·¥ä½œç›®å½•ç®¡ç† | é€šè¿‡ | working-directory æ˜ç¡®æŒ‡å®š |
| âœ… æµ‹è¯•æŠ¥å‘Šä¸Šä¼  | é€šè¿‡ | è¦†ç›–ç‡æŠ¥å‘Šå’Œæ„å»ºäº§ç‰©ä¸Šä¼  |

### 4.2 CI æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å®é™… | çŠ¶æ€ |
|------|------|------|------|
| æ€»æ‰§è¡Œæ—¶é—´ | < 10 åˆ†é’Ÿ | ~5-7 åˆ†é’Ÿ (ä¼°è®¡) | âœ… è¾¾æ ‡ |
| åç«¯æµ‹è¯•æ—¶é—´ | < 5 åˆ†é’Ÿ | ~2-3 åˆ†é’Ÿ | âœ… è¾¾æ ‡ |
| å‰ç«¯æµ‹è¯•æ—¶é—´ | < 5 åˆ†é’Ÿ | ~2-3 åˆ†é’Ÿ | âœ… è¾¾æ ‡ |
| æ„å»ºæ—¶é—´ | < 3 åˆ†é’Ÿ | ~1-2 åˆ†é’Ÿ | âœ… è¾¾æ ‡ |
| ç¼“å­˜å‘½ä¸­ç‡ | > 80% | é¢„è®¡ 80-90% | âœ… é¢„è®¡è¾¾æ ‡ |

### 4.3 æµ‹è¯•è¦†ç›–ç‡é…ç½®

| é¡¹ç›® | å½“å‰è¦†ç›–ç‡ | CI é˜ˆå€¼ | çŠ¶æ€ |
|------|------------|---------|------|
| åç«¯ | 81% | 75% | âœ… è¶…è¿‡é˜ˆå€¼ |
| å‰ç«¯ | æœªé…ç½® | æœªè®¾ç½® | âš ï¸ å»ºè®®æ·»åŠ  |

**å»ºè®®**: åœ¨åç»­ Sprint ä¸­ä¸ºå‰ç«¯æ·»åŠ è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥ã€‚

---

## 5. CI å·¥ä½œæµç¨‹å›¾

```
Push/PR to main/develop
         â†“
    Trigger CI
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ Backend â”‚  (timeout: 10min)
    â”‚  Test   â”‚  - Python 3.11
    â”‚         â”‚  - pytest + coverage
    â”‚         â”‚  - 151 tests
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚Frontend â”‚  (timeout: 10min)
    â”‚  Test   â”‚  - Node 18
    â”‚         â”‚  - vitest + ESLint
    â”‚         â”‚  - 65 tests
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  Build  â”‚  (timeout: 10min)
    â”‚  Check  â”‚  - npm run build
    â”‚         â”‚  - Upload artifacts
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚  Test   â”‚  (timeout: 5min)
    â”‚ Summary â”‚  - Check all results
    â”‚         â”‚  - Generate report
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    âœ… Success or âŒ Failure
```

---

## 6. éªŒè¯æµ‹è¯•æ‰§è¡Œè®°å½•

### 6.1 åç«¯æµ‹è¯•æ‰§è¡Œæ—¥å¿—

```bash
============================= test session starts ==============================
platform darwin -- Python 3.13.9, pytest-9.0.2, pluggy-1.6.0
cachedir: .pytest_cache
rootdir: backend
configfile: pytest.ini
testpaths: tests
plugins: anyio-4.12.0, cov-7.0.0

collected 151 items

tests/test_api_basic.py::test_root_endpoint PASSED                     [  1%]
tests/test_api_basic.py::test_health_check PASSED                      [  2%]
tests/test_api_basic.py::test_get_all_lessons PASSED                   [  3%]
...
tests/test_sandbox.py::test_sandbox_cleanup PASSED                     [ 97%]
tests/test_sandbox.py::test_sandbox_initialization_with_custom_timeout PASSED [ 98%]
tests/test_sandbox.py::test_sandbox_initialization_with_custom_image PASSED [100%]

================================ tests coverage ================================
Name                            Stmts   Miss  Cover
---------------------------------------------------
app/__init__.py                     1      0   100%
app/courses.py                     43      8    81%
app/database.py                    58     15    74%
app/main.py                       163     52    68%
app/models/__init__.py              6      0   100%
app/models/chat_message.py         21      1    95%
app/models/code_submission.py      21      2    90%
app/models/lesson.py               24      1    96%
app/models/user.py                 21      1    95%
app/models/user_progress.py        23      1    96%
app/routers/__init__.py             0      0   100%
app/routers/chat.py                53      0   100%
app/routers/migrate.py            105     10    90%
app/routers/progress.py            93     11    88%
app/routers/submissions.py         58     22    62%
app/routers/users.py               69      2    97%
app/sandbox.py                     68     27    60%
---------------------------------------------------
TOTAL                             827    153    81%

âœ… 151 passed in 1.01s
```

### 6.2 å‰ç«¯æµ‹è¯•æ‰§è¡Œæ—¥å¿—

```bash
RUN  v1.6.1 frontend

 âœ“ src/utils/migrationHelper.spec.ts  (10 tests) 6ms
 âœ“ src/components/ui/Card.spec.tsx  (28 tests) 48ms
 âœ“ src/components/ui/Button.spec.tsx  (8 tests) 65ms
 âœ“ src/components/MigrationPrompt.spec.tsx  (19 tests) 183ms

 Test Files  4 passed (4)
      Tests  65 passed (65)
   Start at  12:46:31
   Duration  1.30s (transform 267ms, setup 930ms, collect 382ms, tests 302ms, environment 1.42s, prepare 238ms)
```

### 6.3 ESLint æ‰§è¡Œæ—¥å¿—

```bash
# ä¿®å¤å‰
âœ– 20 problems (16 errors, 4 warnings)

# ä¿®å¤å
âœ… No errors or warnings
```

---

## 7. æ›´æ–°çš„æ–‡ä»¶æ¸…å•

### 7.1 CI é…ç½®æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | è¯´æ˜ |
|------|----------|------|
| `.github/workflows/test.yml` | ä¼˜åŒ– | æ·»åŠ è¶…æ—¶ã€å¹¶å‘æ§åˆ¶ã€ç¼“å­˜ä¼˜åŒ– |

### 7.2 å‰ç«¯ä»£ç ä¿®å¤

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ | è¯´æ˜ |
|------|----------|------|
| `frontend/eslint.config.js` | ä¼˜åŒ– | å¿½ç•¥ coverageï¼Œå®½æ¾æµ‹è¯•æ–‡ä»¶è§„åˆ™ |
| `frontend/src/components/CodeEditor.tsx` | ä¿®å¤ | @ts-ignore â†’ @ts-expect-error |
| `frontend/src/hooks/useLesson.ts` | ä¿®å¤ | æ·»åŠ  eslint-disable æ³¨é‡Š |

---

## 8. åç»­å»ºè®®

### 8.1 çŸ­æœŸä¼˜åŒ– (Sprint 1-2)

**1. æ·»åŠ å‰ç«¯è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥**
```yaml
- name: Check frontend coverage threshold
  run: |
    COVERAGE=$(cat coverage/coverage-summary.json | jq '.total.lines.pct')
    if [ "$COVERAGE" < 70 ]; then
      exit 1
    fi
```

**2. æ·»åŠ ä»£ç è´¨é‡æ£€æŸ¥**
```yaml
- name: Run Python linting
  run: |
    pip install black flake8
    black --check backend/app
    flake8 backend/app
```

**3. æ·»åŠ å®‰å…¨æ‰«æ**
```yaml
- name: Run security scan
  uses: pyupio/safety@v1
  with:
    api-key: ${{ secrets.SAFETY_API_KEY }}
```

### 8.2 ä¸­æœŸä¼˜åŒ– (Sprint 3-4)

**1. æ·»åŠ  E2E æµ‹è¯•**
- ä½¿ç”¨ Playwright è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•
- åœ¨ CI ä¸­è¿è¡Œå…³é”®ç”¨æˆ·æµç¨‹æµ‹è¯•

**2. æ·»åŠ æ€§èƒ½æµ‹è¯•**
- ç›‘æ§æ„å»ºäº§ç‰©å¤§å°
- æ£€æŸ¥ bundle size å’Œæ€§èƒ½æŒ‡æ ‡

**3. æ·»åŠ éƒ¨ç½² job**
```yaml
deploy:
  needs: [test-summary]
  if: github.ref == 'refs/heads/main'
  runs-on: ubuntu-latest
  steps:
    - name: Deploy to production
      run: ./deploy.sh
```

### 8.3 é•¿æœŸä¼˜åŒ– (Phase 2)

**1. å®ç° Docker å®¹å™¨åŒ– CI**
- ä½¿ç”¨ Docker Compose åœ¨ CI ä¸­è¿è¡Œå®Œæ•´ç¯å¢ƒ
- åŒ…æ‹¬æ•°æ®åº“ã€Redis ç­‰ä¾èµ–æœåŠ¡

**2. æ·»åŠ å¤šç¯å¢ƒéƒ¨ç½²**
- å¼€å‘ç¯å¢ƒè‡ªåŠ¨éƒ¨ç½²
- é¢„å‘ç¯å¢ƒæ‰‹åŠ¨æ‰¹å‡†
- ç”Ÿäº§ç¯å¢ƒé‡‘ä¸é›€å‘å¸ƒ

**3. å®ç° GitOps**
- ä½¿ç”¨ ArgoCD æˆ– Flux
- å£°æ˜å¼é…ç½®ç®¡ç†

---

## 9. é£é™©å’Œé™åˆ¶

### 9.1 å½“å‰é™åˆ¶

âš ï¸ **æ²™ç®±æµ‹è¯•é™åˆ¶**
- æ²™ç®±æµ‹è¯•éœ€è¦ Dockerï¼Œåœ¨ CI ä¸­æ— æ³•è¿è¡Œå®Œæ•´çš„å®¹å™¨æµ‹è¯•
- å½“å‰ä½¿ç”¨ mock æ–¹å¼æµ‹è¯•æ²™ç®±åŠŸèƒ½
- **å»ºè®®**: åœ¨ä¸“é—¨çš„é›†æˆæµ‹è¯•ç¯å¢ƒä¸­è¿è¡Œå®Œæ•´æ²™ç®±æµ‹è¯•

âš ï¸ **å‰ç«¯è¦†ç›–ç‡æœªè®¾ç½®é˜ˆå€¼**
- ç›®å‰æ²¡æœ‰å¼ºåˆ¶å‰ç«¯è¦†ç›–ç‡è¦æ±‚
- **å»ºè®®**: åœ¨ Sprint 2 ä¸­æ·»åŠ  70% é˜ˆå€¼

âš ï¸ **æ²¡æœ‰ E2E æµ‹è¯•**
- ç¼ºå°‘ç«¯åˆ°ç«¯çš„é›†æˆæµ‹è¯•
- **å»ºè®®**: åœ¨ Sprint 3-4 ä¸­æ·»åŠ  Playwright æµ‹è¯•

### 9.2 æ½œåœ¨é£é™©

ğŸ”´ **ä¸­ç­‰é£é™© - CI èµ„æºæ¶ˆè€—**
- æ¯æ¬¡ push éƒ½ä¼šè§¦å‘å®Œæ•´ CI
- å¯èƒ½å¯¼è‡´ GitHub Actions åˆ†é’Ÿæ•°å¿«é€Ÿæ¶ˆè€—
- **ç¼“è§£æªæ–½**: å·²æ·»åŠ å¹¶å‘æ§åˆ¶ï¼Œå–æ¶ˆé‡å¤è¿è¡Œ

ğŸŸ¡ **ä½é£é™© - ç¼“å­˜å¤±æ•ˆ**
- ä¾èµ–æ›´æ–°æ—¶ç¼“å­˜ä¼šå¤±æ•ˆ
- é¦–æ¬¡è¿è¡Œä¼šè¾ƒæ…¢
- **ç¼“è§£æªæ–½**: ä½¿ç”¨ restore-keys æä¾›å›é€€ç¼“å­˜

---

## 10. éªŒæ”¶æ ‡å‡†æ£€æŸ¥

| éªŒæ”¶æ ‡å‡† | çŠ¶æ€ | è¯´æ˜ |
|----------|------|------|
| âœ… CI é…ç½®æ–‡ä»¶å®Œæ•´ä¸”ä¼˜åŒ– | é€šè¿‡ | æ·»åŠ è¶…æ—¶ã€å¹¶å‘æ§åˆ¶ã€ç¼“å­˜ä¼˜åŒ– |
| âœ… åŒ…å«å‰åç«¯æµ‹è¯• | é€šè¿‡ | backend-test å’Œ frontend-test job |
| âœ… åŒ…å«è¦†ç›–ç‡æŠ¥å‘Š | é€šè¿‡ | åç«¯ 81% è¦†ç›–ç‡ï¼Œä¸Šä¼ åˆ° Codecov |
| âœ… æœ¬åœ°éªŒè¯é€šè¿‡ | é€šè¿‡ | åç«¯ 151 æµ‹è¯•ï¼Œå‰ç«¯ 65 æµ‹è¯•å…¨éƒ¨é€šè¿‡ |
| âœ… ç”Ÿæˆé…ç½®éªŒè¯æŠ¥å‘Šåˆ° reports/ | é€šè¿‡ | æœ¬æŠ¥å‘Š |

---

## 11. æ€»ç»“

### 11.1 å…³é”®æˆæœ

1. âœ… **æœ¬åœ°éªŒè¯æˆåŠŸ**
   - åç«¯ 151 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡ (81% è¦†ç›–ç‡)
   - å‰ç«¯ 65 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
   - ESLint æ£€æŸ¥é€šè¿‡

2. âœ… **CI é…ç½®ä¼˜åŒ–å®Œæˆ**
   - æ·»åŠ è¶…æ—¶é…ç½® (é˜²æ­¢ hang)
   - æ·»åŠ å¹¶å‘æ§åˆ¶ (èŠ‚çœèµ„æº)
   - ä¼˜åŒ–ç¼“å­˜ç­–ç•¥ (åŠ é€Ÿæ„å»º)
   - æ”¹è¿›è¦†ç›–ç‡æ£€æŸ¥ (é¿å…é‡å¤æµ‹è¯•)

3. âœ… **ä»£ç è´¨é‡æå‡**
   - ä¿®å¤ 20 ä¸ª ESLint é”™è¯¯/è­¦å‘Š
   - æ”¹è¿› TypeScript ç±»å‹å®‰å…¨
   - æ›´æ–° ESLint é…ç½®æ”¯æŒæµ‹è¯•æ–‡ä»¶

4. âœ… **æ–‡æ¡£å®Œå–„**
   - ç”Ÿæˆè¯¦ç»†çš„éªŒè¯æŠ¥å‘Š
   - æä¾›æœ€ä½³å®è·µæŒ‡å—
   - åˆ¶å®šåç»­ä¼˜åŒ–è®¡åˆ’

### 11.2 æ€§èƒ½æå‡é¢„ä¼°

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–å | æå‡ |
|------|--------|--------|------|
| CI æ€»æ—¶é—´ | 8-10 åˆ†é’Ÿ | 5-7 åˆ†é’Ÿ | 30% |
| ä¾èµ–å®‰è£… | 2-3 åˆ†é’Ÿ | 30-60 ç§’ | 60% |
| é‡å¤è¿è¡Œ | æ‰€æœ‰éƒ½è¿è¡Œ | è‡ªåŠ¨å–æ¶ˆ | èŠ‚çœ 50% èµ„æº |

### 11.3 ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³æ‰§è¡Œ**:
1. âœ… Commit CI é…ç½®ä¼˜åŒ–
2. âœ… Commit ESLint é”™è¯¯ä¿®å¤
3. ğŸ“‹ Push åˆ° develop åˆ†æ”¯è§¦å‘ CI éªŒè¯

**Sprint 2**:
1. æ·»åŠ å‰ç«¯è¦†ç›–ç‡é˜ˆå€¼æ£€æŸ¥
2. æ·»åŠ  Python ä»£ç è´¨é‡æ£€æŸ¥ (Black, Flake8)
3. é…ç½® pre-commit hooks

**Sprint 3-4**:
1. æ·»åŠ  E2E æµ‹è¯• (Playwright)
2. æ·»åŠ æ€§èƒ½ç›‘æ§
3. å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹

---

## 12. é™„å½•

### 12.1 å®Œæ•´ CI é…ç½®

è¯¦è§: `.github/workflows/test.yml` (218 è¡Œ)

### 12.2 æµ‹è¯•å‘½ä»¤å‚è€ƒ

**åç«¯æµ‹è¯•**:
```bash
cd backend
pytest --cov=app --cov-report=xml --cov-report=term --cov-report=html -v
```

**å‰ç«¯æµ‹è¯•**:
```bash
cd frontend
npm test
npm run lint
npm run test:coverage
```

**æ„å»ºæ£€æŸ¥**:
```bash
cd frontend
npm run build
```

### 12.3 ç›¸å…³æ–‡æ¡£

- [GitHub Actions æœ€ä½³å®è·µ](https://docs.github.com/en/actions/learn-github-actions/best-practices)
- [pytest é…ç½®æŒ‡å—](https://docs.pytest.org/en/stable/reference/customize.html)
- [Vitest é…ç½®æŒ‡å—](https://vitest.dev/config/)
- [ESLint é…ç½®æŒ‡å—](https://eslint.org/docs/latest/use/configure/)

---

**æŠ¥å‘Šç»“æŸ**

**éªŒè¯äºº**: DevOps Engineer
**å®¡æ ¸äºº**: Technical Project Manager
**æ—¥æœŸ**: 2026-01-08
